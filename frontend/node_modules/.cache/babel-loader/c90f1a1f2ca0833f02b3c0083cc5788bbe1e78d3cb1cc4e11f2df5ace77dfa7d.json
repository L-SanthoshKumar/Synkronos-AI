{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lsk00\\\\ai-job-portal\\\\frontend\\\\src\\\\context\\\\AppContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport api from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppContext = /*#__PURE__*/createContext();\nexport const useApp = () => {\n  _s();\n  const context = useContext(AppContext);\n  if (!context) {\n    throw new Error('useApp must be used within AppProvider');\n  }\n  return context;\n};\n_s(useApp, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AppProvider = ({\n  children\n}) => {\n  _s2();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [jobs, setJobs] = useState([]); // Public jobs (for job seekers)\n  const [recruiterJobs, setRecruiterJobs] = useState([]); // Recruiter's posted jobs\n  const [applications, setApplications] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Initialize user from localStorage\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const role = localStorage.getItem('role');\n    if (token && role) {\n      fetchUserProfile();\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  // Fetch user profile\n  const fetchUserProfile = async () => {\n    try {\n      const res = await api.get('/auth/profile');\n      setCurrentUser(res.data.data.user || res.data.data);\n    } catch (err) {\n      console.error('Error fetching profile:', err);\n      // Clear invalid token\n      localStorage.removeItem('token');\n      localStorage.removeItem('role');\n      setCurrentUser(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch all jobs\n  const fetchJobs = async (filters = {}) => {\n    try {\n      const params = new URLSearchParams();\n      Object.keys(filters).forEach(key => {\n        if (filters[key]) params.append(key, filters[key]);\n      });\n      const res = await api.get(`/jobs?${params.toString()}`);\n      setJobs(res.data.data || []);\n      return res.data.data || [];\n    } catch (err) {\n      console.error('Error fetching jobs:', err);\n      setJobs([]);\n      return [];\n    }\n  };\n\n  // Fetch recruiter's posted jobs\n  const fetchRecruiterJobs = async () => {\n    try {\n      const res = await api.get('/jobs/my-jobs');\n      setRecruiterJobs(res.data.data || []);\n      return res.data.data || [];\n    } catch (err) {\n      console.error('Error fetching recruiter jobs:', err);\n      setRecruiterJobs([]);\n      return [];\n    }\n  };\n\n  // Fetch applications\n  const fetchApplications = async () => {\n    try {\n      const role = localStorage.getItem('role');\n      if (role === 'jobseeker') {\n        // Job seekers should use the base route which is protected by isJobSeeker middleware\n        const res = await api.get('/applications');\n        setApplications(res.data.data || []);\n        return res.data.data || [];\n      } else if (role === 'recruiter') {\n        // Recruiters use the my-applications route\n        const res = await api.get('/applications/my-applications');\n        setApplications(res.data.data || []);\n        return res.data.data || [];\n      }\n    } catch (err) {\n      console.error('Error fetching applications:', err);\n      setApplications([]);\n      return [];\n    }\n  };\n\n  // Login\n  const login = (token, user) => {\n    localStorage.setItem('token', token);\n    localStorage.setItem('role', user.role);\n    setCurrentUser(user);\n  };\n\n  // Logout\n  const logout = () => {\n    localStorage.clear();\n    setCurrentUser(null);\n    setJobs([]);\n    setRecruiterJobs([]);\n    setApplications([]);\n  };\n\n  // Add job\n  const addJob = job => {\n    setRecruiterJobs(prev => [job, ...prev]);\n    // Also add to public jobs if it's active\n    if (job.status === 'active') {\n      setJobs(prev => [job, ...prev]);\n    }\n  };\n\n  // Add application\n  const addApplication = application => {\n    setApplications(prev => [application, ...prev]);\n  };\n\n  // Update application\n  const updateApplication = (applicationId, updates) => {\n    setApplications(prev => prev.map(app => app._id === applicationId ? {\n      ...app,\n      ...updates\n    } : app));\n  };\n\n  // Withdraw application\n  const withdrawApplication = async applicationId => {\n    try {\n      const res = await api.put(`/applications/${applicationId}/withdraw`);\n      if (res.data.success) {\n        // Update the application in state\n        updateApplication(applicationId, {\n          status: 'withdrawn'\n        });\n        return res.data;\n      }\n    } catch (err) {\n      console.error('Error withdrawing application:', err);\n      throw err;\n    }\n  };\n  const value = {\n    currentUser,\n    jobs,\n    recruiterJobs,\n    applications,\n    loading,\n    login,\n    logout,\n    fetchUserProfile,\n    fetchJobs,\n    fetchRecruiterJobs,\n    fetchApplications,\n    addJob,\n    addApplication,\n    updateApplication,\n    withdrawApplication,\n    setJobs,\n    setRecruiterJobs,\n    setApplications\n  };\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 10\n  }, this);\n};\n_s2(AppProvider, \"grvkUHd7RwokxooiBDGgEpIm0wE=\");\n_c = AppProvider;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","api","jsxDEV","_jsxDEV","AppContext","useApp","_s","context","Error","AppProvider","children","_s2","currentUser","setCurrentUser","jobs","setJobs","recruiterJobs","setRecruiterJobs","applications","setApplications","loading","setLoading","token","localStorage","getItem","role","fetchUserProfile","res","get","data","user","err","console","error","removeItem","fetchJobs","filters","params","URLSearchParams","Object","keys","forEach","key","append","toString","fetchRecruiterJobs","fetchApplications","login","setItem","logout","clear","addJob","job","prev","status","addApplication","application","updateApplication","applicationId","updates","map","app","_id","withdrawApplication","put","success","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/lsk00/ai-job-portal/frontend/src/context/AppContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport api from '../api';\r\n\r\nconst AppContext = createContext();\r\n\r\nexport const useApp = () => {\r\n  const context = useContext(AppContext);\r\n  if (!context) {\r\n    throw new Error('useApp must be used within AppProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AppProvider = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [jobs, setJobs] = useState([]); // Public jobs (for job seekers)\r\n  const [recruiterJobs, setRecruiterJobs] = useState([]); // Recruiter's posted jobs\r\n  const [applications, setApplications] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Initialize user from localStorage\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    const role = localStorage.getItem('role');\r\n    if (token && role) {\r\n      fetchUserProfile();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch user profile\r\n  const fetchUserProfile = async () => {\r\n    try {\r\n      const res = await api.get('/auth/profile');\r\n      setCurrentUser(res.data.data.user || res.data.data);\r\n    } catch (err) {\r\n      console.error('Error fetching profile:', err);\r\n      // Clear invalid token\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('role');\r\n      setCurrentUser(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch all jobs\r\n  const fetchJobs = async (filters = {}) => {\r\n    try {\r\n      const params = new URLSearchParams();\r\n      Object.keys(filters).forEach(key => {\r\n        if (filters[key]) params.append(key, filters[key]);\r\n      });\r\n      \r\n      const res = await api.get(`/jobs?${params.toString()}`);\r\n      setJobs(res.data.data || []);\r\n      return res.data.data || [];\r\n    } catch (err) {\r\n      console.error('Error fetching jobs:', err);\r\n      setJobs([]);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Fetch recruiter's posted jobs\r\n  const fetchRecruiterJobs = async () => {\r\n    try {\r\n      const res = await api.get('/jobs/my-jobs');\r\n      setRecruiterJobs(res.data.data || []);\r\n      return res.data.data || [];\r\n    } catch (err) {\r\n      console.error('Error fetching recruiter jobs:', err);\r\n      setRecruiterJobs([]);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Fetch applications\r\n  const fetchApplications = async () => {\r\n    try {\r\n      const role = localStorage.getItem('role');\r\n      if (role === 'jobseeker') {\r\n        // Job seekers should use the base route which is protected by isJobSeeker middleware\r\n        const res = await api.get('/applications');\r\n        setApplications(res.data.data || []);\r\n        return res.data.data || [];\r\n      } else if (role === 'recruiter') {\r\n        // Recruiters use the my-applications route\r\n        const res = await api.get('/applications/my-applications');\r\n        setApplications(res.data.data || []);\r\n        return res.data.data || [];\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching applications:', err);\r\n      setApplications([]);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Login\r\n  const login = (token, user) => {\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('role', user.role);\r\n    setCurrentUser(user);\r\n  };\r\n\r\n  // Logout\r\n  const logout = () => {\r\n    localStorage.clear();\r\n    setCurrentUser(null);\r\n    setJobs([]);\r\n    setRecruiterJobs([]);\r\n    setApplications([]);\r\n  };\r\n\r\n  // Add job\r\n  const addJob = (job) => {\r\n    setRecruiterJobs(prev => [job, ...prev]);\r\n    // Also add to public jobs if it's active\r\n    if (job.status === 'active') {\r\n      setJobs(prev => [job, ...prev]);\r\n    }\r\n  };\r\n\r\n  // Add application\r\n  const addApplication = (application) => {\r\n    setApplications(prev => [application, ...prev]);\r\n  };\r\n\r\n  // Update application\r\n  const updateApplication = (applicationId, updates) => {\r\n    setApplications(prev =>\r\n      prev.map(app =>\r\n        app._id === applicationId ? { ...app, ...updates } : app\r\n      )\r\n    );\r\n  };\r\n\r\n  // Withdraw application\r\n  const withdrawApplication = async (applicationId) => {\r\n    try {\r\n      const res = await api.put(`/applications/${applicationId}/withdraw`);\r\n      if (res.data.success) {\r\n        // Update the application in state\r\n        updateApplication(applicationId, { status: 'withdrawn' });\r\n        return res.data;\r\n      }\r\n    } catch (err) {\r\n      console.error('Error withdrawing application:', err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    currentUser,\r\n    jobs,\r\n    recruiterJobs,\r\n    applications,\r\n    loading,\r\n    login,\r\n    logout,\r\n    fetchUserProfile,\r\n    fetchJobs,\r\n    fetchRecruiterJobs,\r\n    fetchApplications,\r\n    addJob,\r\n    addApplication,\r\n    updateApplication,\r\n    withdrawApplication,\r\n    setJobs,\r\n    setRecruiterJobs,\r\n    setApplications,\r\n  };\r\n\r\n  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}